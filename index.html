<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Mi progreso en FMED</title>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive;
      background-color: #faf6fb;
      color: #333;
      padding: 30px;
    }

    h1 {
      text-align: center;
      font-style: italic;
      color: #8b4d8b;
    }

    .progress-container {
      position: relative;
      width: 80%;
      height: 30px;
      background-color: #ddd;
      border-radius: 30px;
      margin: 20px auto 40px;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      background-color: #d9a0d2;
      border-radius: 30px;
      transition: width 0.4s ease;
      width: 0%;
    }

    .cat {
      position: absolute;
      top: -30px;
      height: 60px;
      transition: left 0.4s ease;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 15px;
    }

    .subject {
      background-color: #ffe4f2;
      border: 2px solid #ccc;
      border-radius: 15px;
      padding: 10px;
      cursor: pointer;
      position: relative;
    }

    .subject.locked {
      background-color: #eee;
      color: #999;
      pointer-events: none;
    }

    .subject.checked {
      text-decoration: line-through;
      background-color: #c5f5d3;
    }

    .tooltip {
      visibility: hidden;
      position: absolute;
      top: -20px;
      left: 0;
      background-color: #fff;
      color: #000;
      border: 1px solid #ccc;
      padding: 5px;
      font-size: 12px;
      border-radius: 6px;
    }

    .subject:hover .tooltip {
      visibility: visible;
    }
  </style>
</head>
<body>
  <h1>Mi progreso en FMED</h1>

  <div class="progress-container">
    <div class="progress-bar" id="progress-bar"></div>
    <img src="gatito.png" class="cat" id="cat" />
  </div>

  <div class="grid" id="subjects-grid"></div>

  <script>
    const materias = [
      { nombre: "CBC - Biología", correlativas: [] },
      { nombre: "CBC - Química", correlativas: [] },
      { nombre: "CBC - Física", correlativas: [] },
      { nombre: "Anatomía", correlativas: ["CBC - Biología", "CBC - Química"] },
      { nombre: "Histología", correlativas: ["CBC - Biología"] },
      { nombre: "Bioquímica", correlativas: ["CBC - Química"] },
      { nombre: "Fisiología", correlativas: ["Anatomía", "Bioquímica"] },
      { nombre: "Salud Mental", correlativas: ["Fisiología"] },
      { nombre: "Farmacología", correlativas: ["Fisiología", "Bioquímica"] },
      { nombre: "Clínica Médica", correlativas: ["Farmacología"] },
      { nombre: "CIR Internado", correlativas: ["Clínica Médica", "Salud Mental"] }
    ];

    const grid = document.getElementById('subjects-grid');

    function crearMateria(materia) {
      const div = document.createElement('div');
      div.className = 'subject locked';
      div.textContent = materia.nombre;

      const tooltip = document.createElement('div');
      tooltip.className = 'tooltip';
      tooltip.textContent = materia.correlativas.length ? 'Correlativas: ' + materia.correlativas.join(', ') : 'Sin correlativas';
      div.appendChild(tooltip);

      div.addEventListener('click', () => {
        div.classList.toggle('checked');
        actualizarMaterias();
      });

      return div;
    }

    function actualizarMaterias() {
      const materiasDivs = document.querySelectorAll('.subject');
      materiasDivs.forEach((div, i) => {
        const aprobadas = [...materiasDivs].filter(m => m.classList.contains('checked')).map(m => m.textContent);
        const estaAprobada = div.classList.contains('checked');
        const correlativas = materias[i].correlativas;

        if (estaAprobada || correlativas.every(c => aprobadas.includes(c))) {
          div.classList.remove('locked');
        } else {
          div.classList.add('locked');
        }
      });

      actualizarProgreso();
    }

    function actualizarProgreso() {
      const total = materias.length;
      const aprobadas = document.querySelectorAll('.subject.checked').length;
      const progreso = (aprobadas / total) * 100;

      const bar = document.getElementById('progress-bar');
      const cat = document.getElementById('cat');

      bar.style.width = progreso + '%';
      cat.style.left = `calc(${progreso}% - 30px)`;
    }

    // Inicializa
    materias.forEach(m => {
      const div = crearMateria(m);
      grid.appendChild(div);
    });
    actualizarMaterias();
  </script>
</body>
</html>
